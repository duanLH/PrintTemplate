!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).printTemplate=t()}}(function(){return function o(s,a,l){function u(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=a[e]={exports:{}};s[e][0].call(r.exports,function(t){return u(s[e][1][t]||t)},r,r.exports,o,s,a,l)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(i){void 0===i&&(i=300);var n={};return Object.keys(r).forEach(function(t){n[t]=[];var e=r[t][0]/25.4*i;n[t].push(Math.round(e)),e=r[t][1]/25.4*i,n[t].push(Math.round(e))}),n}var r={a0:[841,1189],a1:[594,841],a2:[420,584],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],a7:[74,105],a8:[52,74],a9:[37,52],a10:[26,37],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,276],b7:[88,125],b8:[62,88],b9:[44,62],b10:[31,44],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],c6:[114,162],c7:[81,114],c8:[57,81],c9:[40,57],c10:[28,40]};i.default=n,i.def=n(300),i.format=function(t,e,i){return void 0===e&&(e=300),void 0===i&&(i="mm"),"mm"==i?t/25.4*e:"cm"==i?t/2.54*e:"px"==i?t:void 0}},{}],2:[function(t,e,i){"use strict";var o=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},s=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var n=(r.plugin=function(t,e){this._plugins[t]?this._plugins[t].push(e):this._plugins[t]=[e]},r.apply=function(n,r){return o(this,void 0,void 0,function(){var e,i;return s(this,function(t){switch(t.label){case 0:if(!(n&&n.type&&this._plugins[n.type]))return[3,5];e=this._plugins[n.type],i=0,t.label=1;case 1:return i<e.length?[4,e[i].apply(n,[r])]:[3,4];case 2:t.sent(),t.label=3;case 3:return i++,[3,1];case 4:return[3,6];case 5:console.log("未知的组件"),t.label=6;case 6:return[2]}})})},r._plugins={},r);function r(){}i.default=n},{}],3:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},a=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var l=t("jsbarcode"),u=t("../utils");i.default=function(e){return n(this,void 0,void 0,function(){var r,o,s=this;return a(this,function(t){return this._opt||function(){this._opt={format:this.format||"CODE128",width:this.width,height:this.height||100,displayValue:this.displayValue||!0,text:null,fontOptions:this.fontOptions||"",font:this.font||"monospace",textAlign:this.textAlign||"center",textPosition:this.textPosition||"bottom",textMargin:this.textMargin||2,fontSize:this.fontSize||20,background:this.background||"#ffffff",lineColor:this.lineColor||"#000000",margin:this.margin||10,marginTop:this.marginTop||null,marginBottom:this.marginBottom||null,marginLeft:this.marginLeft||null,marginRight:this.marginRight||null,flat:this.flat||!1,valid:this.valid||function(t){}},this._img=document.createElement("img")}.apply(this),this._opt.text=e||"",r=u.format({image:null,x:this.x,y:this.y,width:this.width,height:this.height||10,margin:this.margin,fontSize:this.fontSize},[],this.dpi,this.unit),this._opt.fontSize=r.fontSize||20,this._opt.margin=r.margin||10,this._opt.height=r.height-2*r.margin-this._opt.fontSize,l(this._img,e,this._opt),(o=this._img.src)&&"data:,"!=o&&new Promise(function(e,t){var i=document.createElement("img"),n=s;i.src=o,i.onload=function(t){r.image=o,r.width=i.width,n.img(r),e()}}),[2]})})}},{"../utils":8,jsbarcode:"jsbarcode"}],4:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},r=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../utils");i.default=function(i){return n(this,void 0,void 0,function(){var e;return r(this,function(t){return i&&(this._opt=Object.assign({},{style:{image:i}}),this._opt={image:i},this._opt.x=this.x||0,this._opt.y=this.y||0,this._opt.width=this.width||this.height||0,this._opt.height=this.height||this.width||0,this.fixed?this.element||(e=o.format(this._opt,[],this.dpi,this.unit),this.element=o.Image(e),this.add(this.element)):(e=o.format(this._opt,[],this.dpi,this.unit),this.img(e))),[2]})})}},{"../utils":8}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("../utils");i.default=function(){this.orientation=this.orientation||"l",this.list=this.list||[],0<this.list.length&&(this.remove(this.list),this.list.splice(0,this.list.length));var t=this.x||0,e=this.y||0,i=this.length||0,n=t,r=e;"l"==this.orientation?n=t+i:r=e+i;var o=s.format({x1:t,x2:n,y1:e,y2:r},[],this.dpi,this.unit);this.list.push(s.Line(o)),this.add(this.list)}},{"../utils":8}],6:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},r=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var o=t("qrcode"),s=t("../utils");i.default=function(i){return n(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return this.options=s.format({text:i||"https://github.com/XXllXX/",x:this.x,y:this.y,width:this.width||20,height:this.width||20,colorDark:this.colorDark||"#000000",colorLight:this.colorLight||"#ffffff",correctLevel:this.correctLevel||"H"},[],this.dpi,this.unit),[4,o.toDataURL(this.options.text,this.options)];case 1:return e=t.sent(),this.options.image=e,this.img(this.options),[2]}})})}},{"../utils":8,qrcode:"qrcode"}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var f=t("../utils");i.default=function(t){if(this.orientation=this.orientation||"l",this.list=this.list||[],""!=(t||"")){0<this.list.length&&(this.remove(this.list),this.list.splice(0,this.list.length));var e=this.x||0,i=this.y||0,n=this.fontSize||20,r=this.space||0;if(0!=r)for(var o=0;o<t.length;o++){var s=t.charAt(o);"l"==this.orientation?e=e+o*n+o*r:i=i+o*n+o*r;var a=f.format({text:s,x:e,y:i,fontSize:n},["x","y","fontSize"],this.dpi,this.unit);this.list.push(f.Text(a))}else{if("p"==this.orientation)t=t.match(/.{1}/g).join("\n");else if(this.maxWidth){var l=f.format({text:t,x:e,y:i,fontSize:n,maxWidth:this.maxWidth},["x","y","fontSize","maxWidth"],this.dpi,this.unit),u=l.maxWidth,h=parseInt(u/l.fontSize),c=new RegExp(".{"+h+"}","g");t.match(c)&&(t=t.match(c).join("\n"))}a=f.format({text:t,x:e,y:i,fontSize:n},["x","y","fontSize"],this.dpi,this.unit);this.list.push(f.Text(a))}this.add(this.list)}}},{"../utils":8}],8:[function(t,e,i){"use strict";var o=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},s=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var a=t("zrender"),n={position:[0,0],style:{text:null,fontSize:36,fontFamily:"微软雅黑",fontWeight:null,fontStyle:null}},r={style:{image:null,x:0,y:0,width:0,height:0}},l={position:[0,0],shape:{x1:0,y1:0,x2:0,y2:0,percent:1}},u=new XMLHttpRequest;u.responseType="blob";var h=document.createElement("img");function c(r){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,new Promise(function(e,t){u.open("GET",r,!1),u.send();var i=u.response;if(200==u.status){var n=URL.createObjectURL(i);h.src=n,h.onload=function(t){e({width:h.width,height:h.height})}}else t("未找到图片！")})]})})}i.Line=function(t,e,i,n){var r=Object.assign(l,{shape:{x1:t,x2:e,y1:i,y2:n}});1==arguments.length&&(r=Object.assign(l,{shape:t}));var o=JSON.parse(JSON.stringify(r));return new a.Line(o)},i.Text=function(t){t=Object.assign({},t);var e=Object.assign({},n);"object"==typeof t?(e.style.text=t.text||n.style.text,e.position[0]=t.x||n.position[0],e.position[1]=t.y||n.position[1],e.style.fontSize=t.fontSize||n.style.fontSize,e.style.fontFamily=t.fontFamily||n.style.fontFamily,e.style.fontWeight=t.fontWeight||n.style.fontWeight,e.style.fontStyle=t.fontStyle||n.style.fontStyle):((e=Object.assign(t,n)).style.text=arguments[0]||n.style.text,e.position[0]=arguments[1]||n.position[0],e.position[1]=arguments[2]||n.position[1],e.style.fontSize=arguments[3]||n.style.fontSize,e.style.fontFamily=arguments[4]||n.style.fontFamily,e.style.fontWeight=arguments[5]||n.style.fontWeight,e.style.fontStyle=arguments[6]||n.style.fontStyle);var i=JSON.parse(JSON.stringify(e));return new a.Text(i)},i.Image=function(t){var e=Object.assign({},r);"object"==typeof t?(e.style.x=t.x||r.style.x,e.style.y=t.y||r.style.y,e.style.image=t.image||r.style.image,e.style.width=t.width||r.style.width,e.style.height=t.height||r.style.height):((e=Object.assign(t,r)).style.image=t||r.style.image,e.style.x=arguments[1]||r.style.x,e.style.y=arguments[2]||r.style.y,e.style.width=arguments[3]||r.style.width,e.style.height=arguments[4]||r.style.height);var i=JSON.parse(JSON.stringify(e));return new a.Image(i)},i.GetImageSize=c,i.UpdateImageSize=function(n){return o(this,void 0,void 0,function(){var e,i;return s(this,function(t){switch(t.label){case 0:return(e=n._$eventProcessor).src?[4,c(e.src)]:[2];case 1:return(i=t.sent())?(e.style.width=i.width,e.style.height=i.height,n.attr("style",e.style),[2,i]):[2,{}]}})})},i.remove=function(e,t){t instanceof Array||(t=[t]),t.forEach(function(t){e.remove(t)})},i.add=function(e,t){t instanceof Array||(t=[t]),t.forEach(function(t){e.add(t)})},i.format=function(t,e,i,n){if(void 0===i&&(i=300),void 0===n&&(n="mm"),t){var r=JSON.parse(JSON.stringify(t));if(0!=e.length)return e.forEach(function(t){if(r[t]){var e=r[t];"mm"==n?r[t]=e/25.4*i:"cm"==n?r[t]=e/2.54*i:"px"==n&&(r[t]=e)}}),r;for(var o in r)if("number"==typeof r[o]){var s=r[o];"mm"==n?r[o]=s/25.4*i:"cm"==n?r[o]=s/2.54*i:"px"==n&&(r[o]=s)}return r}return t}},{zrender:"zrender"}],9:[function(t,e,i){"use strict";var n=this&&this.__awaiter||function(o,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{r(l.next(t))}catch(t){e(t)}}function n(t){try{r(l.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}r((l=l.apply(o,s||[])).next())})},y=this&&this.__generator||function(i,n){var r,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(i,"__esModule",{value:!0});var r=t("./plugins"),o=t("./plugins/text"),s=t("./plugins/line"),a=t("./plugins/image"),l=t("./plugins/barcode"),u=t("./plugins/qrcode"),f=t("./pageSize"),p=t("zrender"),g=t("jspdf"),m=t("./utils"),h=(v.prototype.loadDefaultPlugins=function(){0<v.plugins.length||(v.plugins.plugin("text",o.default),v.plugins.plugin("image",a.default),v.plugins.plugin("barcode",l.default),v.plugins.plugin("qrcode",u.default),v.plugins.plugin("line",s.default))},v.prototype.use=function(){},v.prototype.push=function(t){var e=t,i=arguments[1]||"A4",n=arguments[2]||"p",r=arguments[3]||"mm",o=arguments[4]||{},s=300,a=[];if(t instanceof Object&&(e=t.name,i=t.size||i,n=t.orientation||n,r=t.unit,s=t.dpi||300,a=t.fixed,o=t.data),!v._templates[e]){var l={};l.name=e,l.size=i,l._html=document.createElement("div");var u=0,h=0;if(l.size instanceof Array)u=l.size[0],h=l.size[1];else{var c=f.default(s)[i.toLocaleLowerCase()];c=c||f.default(s).a4,"l"==n&&c.reverse(),u=c[0],h=c[1]}return u=f.format(u,s,r),h=f.format(h,s,r),l._html.style.width=u+"px",l._html.style.height=h+"px",l._zr=p.init(l._html),v._templates[e]={size:i,width:u,unit:r,height:h,orientation:n,page:l,fixed:a,data:o},v._templates[e].add=function(t){m.add(this.page._zr,t)},v._templates[e].remove=function(t){m.remove(this.page._zr,t)},v._templates._img=[],v._templates._imgs=[],this.print(e,{}),this}console.warn("已存在"+e+"模板")},v.prototype.print=function(p,d){return n(this,void 0,void 0,function(){var e,i,n,r,o,s,a,l,u,h,c,f;return y(this,function(t){switch(t.label){case 0:if(p instanceof Object&&(p=p.name||"",d=p.data||p),!(e=v._templates[p]))return console.warn("未定义模板"),[2];if(e._img=[],e._imgs||(e._imgs=[]),i=new g({unit:"pt",precision:0,format:[e.width,e.height]}),d instanceof Array||(d=[d]),!e.fixed)return[3,4];if((n=e.fixed)[0]._zr)return[3,4];o=0,t.label=1;case 1:return o<n.length?((r=n[o])&&!v._templates[p]._zr&&(r.fixed=!0,r._zr=v._templates[p].page._zr,r._template=v._templates[p],r.add=function(t){m.add(this._zr,t)},r.remove=function(t){m.remove(this._zr,t)},r.img=function(t){this._template._imgs.push(t)},r.unit=e.unit,r.dpi=e.dpi),[4,v.plugins.apply(r,r.default)]):[3,4];case 2:t.sent(),t.label=3;case 3:return o++,[3,1];case 4:o=0,t.label=5;case 5:if(!(o<d.length))return[3,12];for(l in s=d[o],a=[],s)a.push(l);u=0,t.label=6;case 6:return u<a.length?(h=a[u],(c=e.data[h])&&!c._zr&&(c._template=e,c._zr=e.page._zr,c.add=function(t){m.add(this._zr,t)},c.remove=function(t){m.remove(this._zr,t)},c.img=function(t){this._template._img.push(t)},c.unit=e.unit,c.dpi=e.dpi),[4,v.plugins.apply(c,s[h])]):[3,9];case 7:t.sent(),t.label=8;case 8:return u++,[3,6];case 9:return[4,this.toImg(e)];case 10:f=t.sent(),0!=o&&i.addPage(),i.addImage(f,"JPEG",0,0,e.width,e.height),e._imgs.forEach(function(t){i.addImage(t.image,"JPEG",t.x,t.y,t.width,t.height)}),e._img.forEach(function(t){i.addImage(t.image,"JPEG",t.x,t.y,t.width,t.height)}),e._img=[],t.label=11;case 11:return o++,[3,5];case 12:return[2,i]}})})},v.prototype.toImg=function(e){return n(this,void 0,void 0,function(){var r,o,s,a;return y(this,function(t){return e.page._zr.refreshImmediately(),r=e.page._html.getElementsByTagName("canvas"),o=document.createElement("canvas"),s={},a=0,o.width=e.page._zr.getWidth(),o.height=e.page._zr.getHeight(),(s=o.getContext("2d")).fillStyle="#fff",s.fillRect(0,0,o.width,o.height),[2,new Promise(function(n){Array.from(r).forEach(function(t){var e=t.toDataURL("image/png",.5),i=new Image;i.src=e,i.onload=function(){if(s.drawImage(i,0,0,o.width,o.height),a++,r.length==a){var t=o.toDataURL("image/jpeg",.5);n(t)}}})})]})})},v.prototype.templateInit=function(t){t._html=document.createElement("div");var e=0,i=0;if(t.size instanceof Array)e=t.size[0],i=t.size[1];else{var n=f.default(t.dpi)[t.size];n=n||f.default(t.dpi).a4,"l"==t.orientation&&n.reverse(),e=n[0],i=n[1]}t._html.style.width=e+"px",t._html.style.height=i+"px",t._zr=p.init(t._html)},v.plugins=r.default,v._templates={},v);function v(t){this._options={},this.loadDefaultPlugins()}i.default=h},{"./pageSize":1,"./plugins":2,"./plugins/barcode":3,"./plugins/image":4,"./plugins/line":5,"./plugins/qrcode":6,"./plugins/text":7,"./utils":8,jspdf:"jspdf",zrender:"zrender"}]},{},[9])(9)});